<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up as Landlord</title>
    <link rel="stylesheet" href="login_style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</head>
<body>
    <div class="container">
        <div class="login-container">
            <h2>Sign Up as Tenant</h2>
            <form id="signup-form">
                <div class="form-group">
                    <label for="name">Full Name:</label>
                    <input type="other" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <div class="form-group">
                    <label for="profile_photo">Pictures of the place:</label>
                    <input type="file" id="profile_photo" name="profile_photo" accept="image/*" required>
                </div>
                <div class="form-group">
                    <label for="address">Address:</label>
                    <input type="other" id="address" name="address" required>
                </div>
                <div class="form-group">
                    <label for="description">Description of the place:</label>
                    <input type="other" id="description" name="description" required>
                </div>
                <div class="form-group">
                    <label for="commute_name">Ideal commute:</label>
                    <input type="other" id="commute_name" name="commute_name" required>
                </div>
                <div class="form-group">
                    <label for="commute_time">Time to the commute:</label>
                    <input type="number" id="commute_time" name="commute_time" required>
                </div>
                <div class="form-group">
                    <label for="commute_time">Size of the apartment:</label>
                    <input type="number" id="size" name="size" required>
                </div>
                <div class="form-group">
                    <label for="rent_price">Rent Price:</label>
                    <input type="number" id="rent_price" name="rent_price" required>
                </div>
                <div class="form-group">
                    <label for="amenities">Amenities:</label>
                    <input type="other" id="amenities" name="amenities" required>
                </div>
                <div class="form-group">
                    <label for="time_from">Available From:</label>
                    <input type="date" id="time_from" name="time_from" required>
                </div>
                <div class="form-group">
                    <label for="time_till">Available Till:</label>
                    <input type="date" id="time_till" name="time_till" required>
                </div>
                <button type="button" onclick="signupLandlord()">Sign Up</button>
            </form>
            <div class="signup-options">
                <p>Already have an account?</p>
                <a href="../">Login</a>
            </div>
        </div>
    </div>
    <script>
        function signupLandlord() {
            const jsonData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                password: document.getElementById('password').value,
                address: document.getElementById('address').value,
                time_from: document.getElementById('time_from').value,
                time_to: document.getElementById('time_till').value,
                rent_price: parseInt(document.getElementById('rent_price').value),
                description: document.getElementById('description').value,
                commute_name: document.getElementById('commute_name').value,
                amenities: document.getElementById('amenities').value,
                size: parseInt(document.getElementById('size').value),
                commute_time: parseInt(document.getElementById('commute_time').value)
            };
            const xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        let response = JSON.parse(xhr.responseText); // Parse the response JSON
                        let user_id = response.user_id;
                        console.log(user_id);
                        window.location.href = `./Home/?user_id=${user_id}`; 
                    } else {
                        console.error('Signup was not possible:', xhr.status);
                    }
                }
            };
            xhr.open("POST", "https://rentmate-api.up.railway.app/addLandlord");
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send(JSON.stringify(jsonData));
        }
    </script>
</body>
</html>